@inject IJSRuntime JSRuntime
@using BlazorApp1.Components.StatusBadge
@using BlazorApp1.Models

<div class="ticket-item" @onclick="() => OnTicketClick.InvokeAsync(Ticket.ID)">
    <div class="ticket-content">
        <div class="ticket-top-row">
            <div class="ticket-id">@Ticket.GetFormattedID()</div>
            <div class="ticket-time">@Ticket.GetTimeAgo()</div>
        </div>
        @if (!string.IsNullOrEmpty(Ticket.Header))
        {
            <div class="ticket-title" title="@Ticket.Header">@Ticket.Header</div>
        }
        @if (!string.IsNullOrEmpty(Ticket.Details))
        {
            <div class="ticket-desc">@Ticket.Details</div>
        }
        <div class="ticket-footer">
            <div class="ticket-ref">@Ticket.Category</div>
            <StatusBadge Status="@Ticket.Status" />
        </div>
    </div>
    <div class="chevron">
        <i class="fas fa-chevron-right"></i>
    </div>
</div>

@code {
    [Parameter]
    public Ticket Ticket { get; set; } = default!;

    [Parameter]
    public EventCallback<int> OnTicketClick { get; set; }
}